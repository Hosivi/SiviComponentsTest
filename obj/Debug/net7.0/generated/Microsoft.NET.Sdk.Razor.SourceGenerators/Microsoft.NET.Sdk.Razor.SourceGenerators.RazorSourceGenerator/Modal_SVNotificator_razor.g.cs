#pragma checksum "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor" "{8829d00f-11b8-4213-878b-770e8597ac16}" "42558acb7e0bde4adad5ea551a50474f06b1de256acbff5f77dac6a70d0866be"
// <auto-generated/>
#pragma warning disable 1591
namespace SiviComponents.Modal
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Base;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Grid;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.EventArgs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVDropDownSelect;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVFormBuilder;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.DateComponents;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVStepper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Timer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
using SVMediator;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
using MessagingService;

#line default
#line hidden
#nullable disable
    public partial class SVNotificator : global::Microsoft.AspNetCore.Components.ComponentBase, IDisposable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<global::SiviComponents.Modal.SVModal>(0);
            __builder.AddAttribute(1, "CustomButtons", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Boolean>(
#nullable restore
#line 6 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                        true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(2, "ItHaveHeader", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Boolean>(
#nullable restore
#line 6 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                                            true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(3, "Title", "Notificación");
            __builder.AddAttribute(4, "NotificatorClass", "notificator");
            __builder.AddAttribute(5, "NotificatorBackdrop", "notificator-backdrop");
            __builder.AddAttribute(6, "ModalBody", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenElement(7, "div");
                __builder2.AddAttribute(8, "class", "sv-notification");
#nullable restore
#line (9,5)-(9,12) 25 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
__builder2.AddContent(9, message);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(10, "\r\n\t\t");
                __builder2.AddMarkupContent(11, "<style>\r\n\t\t\t.sv-notification {\r\n\t\t\t\twidth: 400px;\r\n\t\t\t}\r\n\t\t</style>");
            }
            ));
            __builder.AddAttribute(12, "ModalFooter", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
#nullable restore
#line 18 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
         if (IfQueryMessage)
		{

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(13, "button");
                __builder2.AddAttribute(14, "type", "button");
                __builder2.AddAttribute(15, "class", "btn btn-primary");
                __builder2.AddAttribute(16, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 20 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                                                                    OnCancel

#line default
#line hidden
#nullable disable
                ));
                __builder2.OpenElement(17, "span");
#nullable restore
#line (21,12)-(21,24) 26 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
__builder2.AddContent(18, CancelButton);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(19, "\r\n\t\t\t");
                __builder2.OpenElement(20, "button");
                __builder2.AddAttribute(21, "type", "button");
                __builder2.AddAttribute(22, "class", "btn btn-primary");
                __builder2.AddAttribute(23, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 23 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                                                                    (() => { OnAceptEvent();})

#line default
#line hidden
#nullable disable
                ));
                __builder2.OpenElement(24, "span");
#nullable restore
#line (24,12)-(24,23) 26 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
__builder2.AddContent(25, AceptButton);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
#nullable restore
#line 26 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
		}
		else
		{

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(26, "button");
                __builder2.AddAttribute(27, "type", "button");
                __builder2.AddAttribute(28, "class", "btn btn-primary");
                __builder2.AddAttribute(29, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 29 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                                                                    OnAcept

#line default
#line hidden
#nullable disable
                ));
                __builder2.OpenElement(30, "span");
#nullable restore
#line (30,12)-(30,23) 26 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
__builder2.AddContent(31, AceptButton);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.CloseElement();
#nullable restore
#line 32 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
		}

#line default
#line hidden
#nullable disable
            }
            ));
            __builder.AddComponentReferenceCapture(32, (__value) => {
#nullable restore
#line 6 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
                                                        Modal = (SiviComponents.Modal.SVModal)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(33, "\r\n");
            __builder.AddMarkupContent(34, "<style>\r\n\t.notificator {\r\n\t\tz-index: 9999 !important;\r\n\t}\r\n\r\n\t.notificator-backdrop {\r\n\t\tz-index: 9900 !important;\r\n\t}\r\n\r\n\t.sv-notification {\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>");
        }
        #pragma warning restore 1998
#nullable restore
#line 50 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\Modal\SVNotificator.razor"
 
	public SVModal Modal;

	[Parameter]
	public Action? OnAfterCancel { get; set; }

	[Parameter]
	public Action? OnAtferAcept { get; set; }

	[Parameter]
	public string Message { get; set; }

	[Parameter]
	public string CancelButton { get; set; } = "Cancelar";

	[Parameter]
	public string AceptButton { get; set; } = "Continuar";

	[Parameter]
	public EventCallback FatherEvent { get; set; }
	[Parameter] public Action OnAceptEvent { get; set; }
	[Parameter] public Action OnCancelEvent { get; set; }

	bool IfQueryMessage = false;

	string message = "";

	protected override void OnInitialized()
	{
		componentEvents.OnNotify += NotifyHandler;
		MessagingService.MessageSending += QueryHandler;
		Console.WriteLine("si esta inicializado el SVNotificator");
	}

	public void NotifyHandler(object sender, StateArgs e) {
		IfQueryMessage = e.IfQueryMessage;
		StateHasChanged();
		if (e.Message != null) SetMessage(e.Message);
		if (e.ActionAfterEvent is not null)
		{
			OnAtferAcept = () => e.ActionAfterEvent?.Invoke();
		}
		if (IfQueryMessage) {
			OnAceptEvent = () => e.ConfirmAction?.Invoke();
			OnCancelEvent = () => e.CancelAction?.Invoke();
		}
		OnOpen();
	}

	public async Task QueryHandler(string query,Action action) 
	{
		SetMessage(query);
		IfQueryMessage = true;
		OnAceptEvent = action;
		OnOpen();
	} 
	
	public void OnOpen()
	{
		Modal.OnOpen(null);
		StateHasChanged();
	}

	public void OnClose()
	{
		Modal.OnClose();
	}

	public void OnCancel()
	{
		if (IfQueryMessage) {
			if (OnCancelEvent is not null) {
				OnCancelEvent();
			}
		}
		Modal.OnClose();
		//OnAfterCancel();
	}

	public void OnAcept()
	{
		Modal.OnClose();
		Console.WriteLine("se cerro el modal");
		if (IfQueryMessage) {
			if (OnAceptEvent is not null) {
				OnAceptEvent(); 
			}
		} else {
			if (OnAtferAcept != null)
			{
				OnAtferAcept();
			}
		}
	}

	public void SetTypeNotification(bool typeNotification)
	{
		IfQueryMessage = typeNotification;
	}

	public void SetMessage(string m)
	{
		message = m;
	}

	public void SetCancelEvent(Action? act)
	{
		if (act != null)
		{
			OnAfterCancel = act;
		}
	}

	public void SetAceptEvent(Action? act)
	{
		if (act != null)
		{
			OnAtferAcept = act;
		}
	}

	public void ShowNotification(string m, Action? AceptAction, Action? CancelAction, bool typeNotification)
	{
		SetMessage(m);
		SetTypeNotification(typeNotification);
		SetAceptEvent(AceptAction);
		SetCancelEvent(CancelAction);
		OnOpen();
	}
	public void Dispose()
	{
		message = "";
		OnAfterCancel = null;
		OnAtferAcept = null;
		IfQueryMessage = false;
		componentEvents.OnNotify -= NotifyHandler;
		MessagingService.MessageSending-= QueryHandler;

	}

	public void ShowNot(string message)
	{
		SetMessage(message);
		SetTypeNotification(false);
		//SetAceptEvent(AfterAcept);
		OnOpen();
	}

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IMessagingService MessagingService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SVComponentEvents componentEvents { get; set; }
    }
}
#pragma warning restore 1591
