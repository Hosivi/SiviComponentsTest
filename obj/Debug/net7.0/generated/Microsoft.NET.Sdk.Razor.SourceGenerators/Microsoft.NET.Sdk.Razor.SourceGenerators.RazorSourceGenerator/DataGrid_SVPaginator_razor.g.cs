#pragma checksum "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor" "{8829d00f-11b8-4213-878b-770e8597ac16}" "835b31cb6f597e7bdfc8d164fcd760071801296f5eaf0ae292d60eaac77f808c"
// <auto-generated/>
#pragma warning disable 1591
namespace SiviComponents.DataGrid
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Base;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Grid;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.EventArgs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVDropDownSelect;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVFormBuilder;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.DateComponents;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.SVStepper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\_Imports.razor"
using SiviComponents.Timer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
using System.ComponentModel.Design;

#line default
#line hidden
#nullable disable
    public partial class SVPaginator<TValue> : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "nav");
            __builder.AddAttribute(1, "aria-label", "...");
            __builder.OpenElement(2, "ul");
            __builder.AddAttribute(3, "class", "pagination");
#nullable restore
#line 5 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
         if ((Grid.SelectedPage?.NumberOfPage >= Radio || Grid.SelectedPage?.NumberOfPage > 1)&&Grid.Data.Count() != 0)
		{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(4, "li");
            __builder.AddAttribute(5, "class", "page-item");
            __builder.OpenElement(6, "a");
            __builder.AddAttribute(7, "class", "page-link");
            __builder.AddAttribute(8, "tabindex", "-1");
            __builder.AddAttribute(9, "aria-disabled", "false");
            __builder.AddAttribute(10, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 8 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
                                                                                   PreviousSelectedPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(11, "Prev");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 10 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
		}

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
         foreach (var pag in RadioPages)
		{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(12, "li");
            __builder.AddAttribute(13, "class", "page-item" + " " + (
#nullable restore
#line 13 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
                                   pag.IsActualPage ? "active" : ""

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 13 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
                                                                                  (() => { ChangePage(pag); })

#line default
#line hidden
#nullable disable
            ));
            __builder.OpenElement(15, "a");
            __builder.AddAttribute(16, "class", "page-link");
            __builder.AddAttribute(17, "tabindex", "-1");
            __builder.AddAttribute(18, "aria-disabled", "true");
#nullable restore
#line (14,62)-(14,78) 25 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
__builder.AddContent(19, pag.NumberOfPage);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 16 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
		}

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
         if (Grid.SelectedPage?.NumberOfPage < NumberOfPages)
		{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(20, "li");
            __builder.AddAttribute(21, "class", "page-item");
            __builder.OpenElement(22, "a");
            __builder.AddAttribute(23, "class", "page-link");
            __builder.AddAttribute(24, "tabindex", "-1");
            __builder.AddAttribute(25, "aria-disabled", "false");
            __builder.AddAttribute(26, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 20 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
                                                                                   NextSelectedPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(27, "Next");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 22 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
		}

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 25 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
       
	#region Parámetros

	[Parameter]
	public int Radio { get; set; } = 3;
	[Parameter] public int CountData { get; set; }
	[Parameter] public int NumberOfItems { get; set; } = 10;
	[Parameter] public EventCallback OnAfterSelectPage { get; set; }
	[CascadingParameter(Name = "Grid")] public SVDataGrid<TValue> Grid { get; set; }
	public int ActualPage = 1;
	#endregion
	#region Attributos
	List<Page> RadioPages = new List<Page>();
	int NumberOfPages;
	#endregion
	#region Eventos
	public void ChangePage(Page page)
	{
		Grid.SelectedPage = page;
		foreach (var p in RadioPages)
		{
			p.IsActualPage = false;
			ActualPage = p.NumberOfPage;
		}
		Grid.SelectedPage.IsActualPage = true;
		if (OnAfterSelectPage.HasDelegate)
		{
			OnAfterSelectPage.InvokeAsync();
			
		}
	}
	#endregion
	#region Ciclos de Vida
	protected override async Task OnInitializedAsync() {
		GetNumberOfPages();
		RenderRadioPages();
		Console.WriteLine(NumberOfPages);
		Console.WriteLine(CountData);
	}


	#endregion

	#region Eventos
	public void GetNumberOfPages()
	{
		CountData = Grid.DataSize;
		if (CountData % Grid.ItemsForPage > 0)
		{
			NumberOfPages = CountData / Grid.ItemsForPage + 1;
		}
		else
		{
			NumberOfPages = CountData / Grid.ItemsForPage;
		}
		if (Radio>NumberOfPages) {
			Radio = NumberOfPages;
		}
	}

	public void RenderRadioPages(int init) {
		var lst = new List<Page>();
		if (init==0) {
			init = 1;
		}
		for (int i = init; i <= init+Radio-1; i++)
		{
			lst.Add(new Page() { NumberOfPage = i });
		}
		RadioPages = lst;
	}
	public void RenderRadioPages() {
		var lst = new List<Page>();
		var finalLapse = Grid.SelectedPage.NumberOfPage + Radio-1;
		if (NumberOfPages<=finalLapse) {
			finalLapse = NumberOfPages;
		}
		for (int i = Grid.SelectedPage.NumberOfPage; i <= finalLapse; i++)
		{
			if (i == Grid.SelectedPage.NumberOfPage)
			{																																						 
				lst.Add(new Page(){IsActualPage = true, NumberOfPage = i});
			} else {
				lst.Add(new Page() { IsActualPage = false, NumberOfPage = i });
			}
		}
		RadioPages = lst; 
	}

	void NextSelectedPage() {
		var lastPage = RadioPages.Last();
		if (Grid.SelectedPage== lastPage) {
			RenderRadioPages();
			var page = RadioPages.FirstOrDefault(x => x.NumberOfPage == Grid.SelectedPage.NumberOfPage + 1);
			ChangePage(page);
		} else {
			var page = RadioPages.FirstOrDefault(x=>x.NumberOfPage==Grid.SelectedPage.NumberOfPage+1);
			ChangePage(page);
		}
	}

	void PreviousSelectedPage() {
		var prevPage = RadioPages.First();
		if (Grid.SelectedPage.NumberOfPage == prevPage.NumberOfPage)
		{
			RenderRadioPages(prevPage.NumberOfPage-Radio+1);
			ChangePage(RadioPages.First(x=>x.NumberOfPage==Grid.SelectedPage.NumberOfPage-1));
			//RenderRadioPages();
		}
		else
		{
			var page = RadioPages.FirstOrDefault(x => x.NumberOfPage == Grid.SelectedPage.NumberOfPage - 1);
			if (page is null) {
				RenderRadioPages(prevPage.NumberOfPage - Radio + 1);
			}
			ChangePage(page);
		}
	}
	#endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 145 "E:\RepositoriosDesarrollo\Horelt\SiviComponents\DataGrid\SVPaginator.razor"
       

	#region Clase Page
	public class Page
	{
		public int NumberOfPage { get; set; }
		public int NumberOfItems { get; set; }
		public bool IsActualPage { get; set; } = false;
	}
	#endregion


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
